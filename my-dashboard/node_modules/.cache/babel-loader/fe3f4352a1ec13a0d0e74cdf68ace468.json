{"ast":null,"code":"var _jsxFileName = \"/home/fernando/\\xC1rea de Trabalho/projetoDashImoveis/my-dashboard/src/components/Table/edittableInsumos.js\";\nimport React, { useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport api from '../../services/api';\nexport default function MaterialTableDemo() {\n  const tableRef = React.createRef();\n  const [state, setState] = React.useState({\n    columns: [{\n      title: 'Código',\n      field: 'codigo',\n      align: 'left',\n      sorting: false\n    }, {\n      title: 'Descrição',\n      field: 'descricaoInsumo',\n      align: 'center',\n      sorting: false\n    }, {\n      title: 'Unidade',\n      field: 'unidade',\n      sorting: false,\n      align: 'center'\n    }, {\n      title: 'Tipo',\n      field: 'tipo',\n      sorting: false,\n      align: 'center'\n    }, {\n      title: 'Valor',\n      field: 'precoMed',\n      align: 'center',\n      sorting: false,\n      type: 'currency',\n      currencySetting: {\n        currencyCode: 'BRL',\n        locale: 'pt-BR'\n      }\n    }],\n    data: []\n  });\n  const [dataApi, setDataApi] = useState([]);\n  const [linearProgress, setLinearProgress] = useState(true);\n  useEffect(() => {\n    loadInsumos();\n  }, []);\n\n  async function loadInsumos() {\n    const response = await api.get(`/insumos/proprios/search`);\n    setDataApi(response.data);\n    setLinearProgress(false);\n  }\n\n  async function handleDelete(oldData) {\n    try {\n      let id = oldData._id;\n      await api.delete(`/insumos/proprios/${id}`);\n      setDataApi(dataApi.filter(insumo => insumo._id !== id));\n    } catch (err) {\n      alert('erro ao deletar:' + err);\n    }\n  }\n\n  async function handleAdd(newData) {\n    try {\n      await api.post('/insumos/proprios', newData);\n    } catch (err) {\n      alert('erro ao Cadastrar:' + err);\n    }\n  }\n\n  async function handleUpdate(newData, oldData) {\n    try {\n      if (oldData) {\n        let id = oldData._id; //console.log(typeof newData.precoMed);\n\n        await api.put(`/insumos/proprios/${id}`, newData);\n      }\n\n      ;\n    } catch (err) {\n      alert('erro ao Atualizar:' + err);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, linearProgress ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  })) : null, /*#__PURE__*/React.createElement(MaterialTable, {\n    tableRef: tableRef,\n    title: \"Criar insumo pr\\xF3prio\",\n    columns: state.columns,\n    data: dataApi,\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve(handleAdd(newData));\n        }, 600);\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve(handleUpdate(newData, oldData));\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve(handleDelete(oldData));\n        }, 600);\n      })\n    },\n    localization: {\n      body: {\n        emptyDataSourceMessage: 'Nenhum registro para exibir',\n        addTooltip: 'adicionar',\n        deleteTooltip: 'excluir',\n        editTooltip: 'editar',\n        editcancelTooltip: 'cancelar',\n        editRow: {\n          saveTooltip: 'salvar',\n          cancelTooltip: 'cancelar',\n          deleteText: 'Tem certeza de que deseja excluir?'\n        }\n      },\n      grouping: {\n        groupedBy: 'Agrupado por:',\n        placeholder: 'Arraste os cabeçalhos aqui para agrupar!'\n      },\n      toolbar: {\n        searchTooltip: 'Pesquisar',\n        searchPlaceholder: 'Pesquisar',\n        showColumnsTitle: 'Mostrar colunas',\n        addRemoveColumns: 'Adicionar ou Remover Colunas'\n      },\n      pagination: {\n        labelRowsSelect: 'linhas',\n        labelDisplayedRows: '{count} de {from}-{to}',\n        firstTooltip: 'Primeira página',\n        previousTooltip: 'Página anterior',\n        nextTooltip: 'Próxima página',\n        lastTooltip: 'Última página'\n      }\n    },\n    options: {},\n    actions: [{\n      icon: 'refresh',\n      tooltip: 'Refresh Data',\n      isFreeAction: true,\n      onClick: () => loadInsumos()\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/home/fernando/Área de Trabalho/projetoDashImoveis/my-dashboard/src/components/Table/edittableInsumos.js"],"names":["React","useEffect","useState","MaterialTable","LinearProgress","api","MaterialTableDemo","tableRef","createRef","state","setState","columns","title","field","align","sorting","type","currencySetting","currencyCode","locale","data","dataApi","setDataApi","linearProgress","setLinearProgress","loadInsumos","response","get","handleDelete","oldData","id","_id","delete","filter","insumo","err","alert","handleAdd","newData","post","handleUpdate","put","onRowAdd","Promise","resolve","setTimeout","onRowUpdate","onRowDelete","body","emptyDataSourceMessage","addTooltip","deleteTooltip","editTooltip","editcancelTooltip","editRow","saveTooltip","cancelTooltip","deleteText","grouping","groupedBy","placeholder","toolbar","searchTooltip","searchPlaceholder","showColumnsTitle","addRemoveColumns","pagination","labelRowsSelect","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","icon","tooltip","isFreeAction","onClick"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport api from '../../services/api';\n\nexport default function MaterialTableDemo() {\n    const tableRef = React.createRef();\n\n    const [state, setState] = React.useState({\n        columns: [\n            { title: 'Código', field: 'codigo', align: 'left', sorting: false, },\n            { title: 'Descrição', field: 'descricaoInsumo', align: 'center', sorting: false, },\n            { title: 'Unidade', field: 'unidade', sorting: false, align: 'center' },\n            { title: 'Tipo', field: 'tipo', sorting: false, align: 'center' },\n            { title: 'Valor', field: 'precoMed', align: 'center', sorting: false, type: 'currency', currencySetting: { currencyCode: 'BRL', locale: 'pt-BR' } },\n        ],\n        data: []\n    });\n\n    const [dataApi, setDataApi] = useState([]);\n    const [linearProgress, setLinearProgress] = useState(true);\n\n    useEffect(() => {\n        loadInsumos();\n    }, [])\n\n    async function loadInsumos() {\n        const response = await api.get(`/insumos/proprios/search`);\n        setDataApi(response.data);\n        setLinearProgress(false);\n    }\n\n    async function handleDelete(oldData) {\n\n        try {\n            let id = oldData._id;\n            await api.delete(`/insumos/proprios/${id}`)\n            setDataApi(dataApi.filter(insumo => insumo._id !== id));\n        } catch (err) {\n            alert('erro ao deletar:' + err)\n        }\n    }\n\n    async function handleAdd(newData) {\n        try {\n            await api.post('/insumos/proprios', newData)\n\n        } catch (err) {\n            alert('erro ao Cadastrar:' + err)\n        }\n    }\n    async function handleUpdate(newData, oldData) {\n        try {\n            if (oldData) {\n                let id = oldData._id;\n                //console.log(typeof newData.precoMed);\n                await api.put(`/insumos/proprios/${id}`, newData);\n            };\n        } catch (err) {\n            alert('erro ao Atualizar:' + err);\n        }\n    }\n\n    return (\n        <div>\n            {linearProgress ?\n                <div ><LinearProgress />\n                    <LinearProgress />\n                </div> : null\n            }\n            <MaterialTable\n                tableRef={tableRef}\n                title=\"Criar insumo próprio\"\n                columns={state.columns}\n                data={dataApi}\n                editable={{\n                    onRowAdd: (newData) =>\n                        new Promise((resolve) => {\n                            setTimeout(() => {\n                                resolve(handleAdd(newData));\n                            }, 600);\n                        }),\n                    onRowUpdate: (newData, oldData) =>\n                        new Promise((resolve) => {\n                            setTimeout(() => {\n                                resolve(handleUpdate(newData, oldData));\n                            }, 600);\n                        }),\n                    onRowDelete: (oldData) =>\n                        new Promise((resolve) => {\n                            setTimeout(() => {\n                                resolve(handleDelete(oldData));\n                            }, 600);\n                        }),\n                }}\n                localization={{\n                    body: {\n                        emptyDataSourceMessage: 'Nenhum registro para exibir',\n                        addTooltip: 'adicionar',\n                        deleteTooltip: 'excluir',\n                        editTooltip: 'editar',\n                        editcancelTooltip: 'cancelar',\n\n                        editRow: {\n                            saveTooltip: 'salvar',\n                            cancelTooltip: 'cancelar',\n                            deleteText: 'Tem certeza de que deseja excluir?'\n                        },\n                    },\n                    grouping: {\n                        groupedBy: 'Agrupado por:',\n                        placeholder: 'Arraste os cabeçalhos aqui para agrupar!'\n                    },\n                    toolbar: {\n                        searchTooltip: 'Pesquisar',\n                        searchPlaceholder: 'Pesquisar',\n                        showColumnsTitle: 'Mostrar colunas',\n                        addRemoveColumns: 'Adicionar ou Remover Colunas'\n                    },\n                    pagination: {\n                        labelRowsSelect: 'linhas',\n                        labelDisplayedRows: '{count} de {from}-{to}',\n                        firstTooltip: 'Primeira página',\n                        previousTooltip: 'Página anterior',\n                        nextTooltip: 'Próxima página',\n                        lastTooltip: 'Última página'\n                    }\n                }}\n                options={{\n                }}\n                actions={[\n                    {\n                        icon: 'refresh',\n                        tooltip: 'Refresh Data',\n                        isFreeAction: true,\n                        onClick: () => loadInsumos(),\n                    }\n                ]}\n            />\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}